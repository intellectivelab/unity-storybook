import {Meta} from '@storybook/addon-docs/blocks';

<Meta title="Examples/Form Layout/README"/>

# Form Layout Examples

This page provides various examples of customizing the default form layout.

<br/>

## Example - Default Form Column Layout

This example shows how to change Default Column Layout by providing a custom configuration.

### Steps

Define a configuration will be used as a new default values for any type of form.

**Note**
In this example we are changing Layout value only from default TwoColumnsLayout to ThreeColumnsLayout

```jsx
const customConfig = {
    variant: 'dialog',
    fullScreen: true,
    maxWidth: 'xl',
    innerMaxWidth: 'lg',
    margin: 'dense',
    Layout: ThreeColumnsLayout
};
```

Implement the domain action mapper where you can additionally tune the layout for specific actions.
**Note**
In this example we are changing Layout value to OneColumnsLayout and ViewForm variant from default 'dialog' to 'sidebar' for Create Case Action only

```jsx
const DomainActionMapper = R.curry((settings = {}, action) => {

    // Add custom actions creation logic here. For example,
    const isCreateAction = R.propEq('type', 'create');
    const isCaseResource = R.propEq('resourceName', "cases");
    const isCreateCaseAction = R.allPass([isCreateAction, isCaseResource]);

    return R.cond([
        [isCreateCaseAction, R.always(CreateCaseWithAttachments({
            ...settings,
            //Using custom configuration settings
            variant: 'sidebar',
            fullScreen: false,
            Layout: OneColumnLayout
        }))],
    ])(action);
});
```

Implement the domain action factory and apply the DomainActionMapper.

```jsx
function DomainActionFactory(defaultSettings = {}) {
    DefaultActionFactory.call(this, defaultSettings);

    this.createAction = R.curry((action, props) => {
        const {settings = {}, ...otherProps} = props;

        const {view: viewSettings = {}} = settings;

        const ActionComponent = DomainActionMapper({...defaultSettings, ...viewSettings}, action) || DefaultActionMapper({...defaultSettings, ...viewSettings}, action);

        return <ActionComponent {...otherProps} {...action} action={action}/>;
    });

}
```

Pass custom configuration into the DomainActionFactory.

```jsx
const ActionFactory = new DomainActionFactory(customConfig);
```

## Example - Custom Form Layout

This example shows how to implement and use Custom Form Layout.

### Steps

Implement Custom Layout as a functional component.
**Note**
Form view content passed to the component within props.

```jsx
const CustomFormLayout = (props) => {

    const {children} = props;
    const classes = useStyles();

    //in this example we just split every 2 fields into the row and render rows inside custom grid
    const rows = R.splitEvery(2, React.Children.toArray(children));

    return (
        <div className={classes.root}>
            <Paper className={classes.paper}>
                <Grid container direction="column" alignItems="center">
                    <Grid item>
                        <Typography variant="h2" gutterBottom>Custom Form Layout</Typography>
                    </Grid>
                    <Grid item xs={12} sm container>
                        {rows.map((row, rowIdx) => (<Grid className={classes.row}
                                                         container
                                                         direction="row"
                                                         justify="space-between"
                                                         alignItems="center"
                                                         key={rowIdx}>
                                {row.map((child, idx) => (
                                    <Grid item xs={4} key={`${rowIdx}-${idx}`}>{child}</Grid>))}
                            </Grid>)
                        )}
                    </Grid>
                </Grid>
            </Paper>
        </div>
    );
};
```

Define a configuration with the CustomFormLayout as Layout.

```jsx
    const customConfig = {
        variant: 'dialog',
        fullScreen: true,
        maxWidth: 'xl',
        innerMaxWidth: 'lg',
        margin: 'dense',
        Layout: CustomFormLayout
    };
```

And pass custom configuration into the ActionFactory.

```jsx
const ActionFactory = new DefaultActionFactory(customConfig);
```

